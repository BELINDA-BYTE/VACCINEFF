<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='This function builds couples of vaccinated - unvaccinated
individuals with similar characteristics. The function relies on  the
propensity score matching algorithm implemented in MatchIt package.
By default the function uses method = "nearest", ratio = 1,
distance = "glm" to match the data.
Exact and near characteristics are accepted for the matching criteria.
These are passed in the parameters exact and nearest, respectively.
Parameters nearest and caliper must be provided together. In this case,
the calipers must be passed as a named vector containing each of
the variables provided in nearest
(e.g. nearest = c("characteristic1", "characteristic2"), caliper = c(characteristic1 = n1, characteristic2 = n2),
where n1 and n2 are the calipers).
caliper is ignored (set to NULL) when nearest is not provided.'><title>Static match of cohort — match_cohort • vaccineff</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Static match of cohort — match_cohort"><meta property="og:description" content='This function builds couples of vaccinated - unvaccinated
individuals with similar characteristics. The function relies on  the
propensity score matching algorithm implemented in MatchIt package.
By default the function uses method = "nearest", ratio = 1,
distance = "glm" to match the data.
Exact and near characteristics are accepted for the matching criteria.
These are passed in the parameters exact and nearest, respectively.
Parameters nearest and caliper must be provided together. In this case,
the calipers must be passed as a named vector containing each of
the variables provided in nearest
(e.g. nearest = c("characteristic1", "characteristic2"), caliper = c(characteristic1 = n1, characteristic2 = n2),
where n1 and n2 are the calipers).
caliper is ignored (set to NULL) when nearest is not provided.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ471458FQ');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="../logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">vaccineff</a>

    <small class="nav-text text-muted me-auto version-number" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/vaccineff.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/epiverse-trace/vaccineff/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Static match of cohort</h1>
      <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/vaccineff/blob/HEAD/R/coh_matching.R" class="external-link"><code>R/coh_matching.R</code></a></small>
      <div class="d-none name"><code>match_cohort.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function builds couples of vaccinated - unvaccinated
individuals with similar characteristics. The function relies on  the
propensity score matching algorithm implemented in MatchIt package.
By default the function uses <code>method = "nearest"</code>, <code>ratio = 1</code>,
<code>distance = "glm"</code> to match the data.
Exact and near characteristics are accepted for the matching criteria.
These are passed in the parameters <code>exact</code> and <code>nearest</code>, respectively.
Parameters <code>nearest</code> and <code>caliper</code> must be provided together. In this case,
the calipers must be passed as a named vector containing each of
the variables provided in <code>nearest</code>
(e.g. <code>nearest = c("characteristic1", "characteristic2"), caliper = c(characteristic1 = n1, characteristic2 = n2)</code>,
where <code>n1</code> and <code>n2</code> are the calipers).
<code>caliper</code> is ignored (set to NULL) when <code>nearest</code> is not provided.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">match_cohort</span><span class="op">(</span><span class="va">data</span>, <span class="va">status_vacc_col</span>, exact <span class="op">=</span> <span class="cn">NULL</span>, nearest <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>dataset with cohort information (see example)</p></dd>


<dt>status_vacc_col</dt>
<dd><p>name of the column containing the information
of the vaccination status.</p></dd>


<dt>exact</dt>
<dd><p>name(s) of column(s) for <code>exact</code> matching.
Default to <code>NULL</code>.</p></dd>


<dt>nearest</dt>
<dd><p>named vector with name(s) of column(s) for <code>nearest</code>
matching and caliper(s) for each variable.
e.g. <code>nearest = c("characteristic1" = n1, "characteristic2" = n2)</code>,
where <code>n1</code> and <code>n2</code> are the calipers. Default to <code>NULL</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>data frame with matched population. Two columns are added
to the structure provided in <code>data</code>:
<code>prop_score</code> (propensity score of the match),
<code>subclass</code> (id of matched couple)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># load package example data for cohort studies</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"cohortdata"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># assign vaccination status</span></span></span>
<span class="r-in"><span><span class="va">cohortdata</span><span class="op">$</span><span class="va">vaccine_status</span> <span class="op">&lt;-</span> <span class="fu"><a href="set_status.html">set_status</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">cohortdata</span>,</span></span>
<span class="r-in"><span>  col_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"vaccine_date_1"</span>, <span class="st">"vaccine_date_2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  status <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"v"</span>, <span class="st">"u"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># match cohort</span></span></span>
<span class="r-in"><span><span class="va">matched_cohort</span> <span class="op">&lt;-</span> <span class="fu">match_cohort</span><span class="op">(</span>data <span class="op">=</span> <span class="va">cohortdata</span>,</span></span>
<span class="r-in"><span>  status_vacc_col <span class="op">=</span> <span class="st">"vaccine_status"</span>,</span></span>
<span class="r-in"><span>  nearest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>age <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  exact <span class="op">=</span> <span class="st">"sex"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># view matched data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">matched_cohort</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         id sex age death_date death_other_causes vaccine_date_1 vaccine_date_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 afade1b2   F  37       &lt;NA&gt;               &lt;NA&gt;           &lt;NA&gt;           &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 04edf85a   M  50       &lt;NA&gt;               &lt;NA&gt;           &lt;NA&gt;           &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 c5a83f56   M  66       &lt;NA&gt;               &lt;NA&gt;           &lt;NA&gt;           &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 7f675ec3   M  29       &lt;NA&gt;               &lt;NA&gt;     2044-04-09     2044-04-30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 5bec597e   F  22       &lt;NA&gt;               &lt;NA&gt;           &lt;NA&gt;           &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9 47507fa7   M  15       &lt;NA&gt;               &lt;NA&gt;     2044-08-22     2044-11-03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   vaccine_1 vaccine_2 vaccine_status prop_score subclass</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      &lt;NA&gt;      &lt;NA&gt;              u  0.4109251    29591</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      &lt;NA&gt;      &lt;NA&gt;              u  0.4448482    29675</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      &lt;NA&gt;      &lt;NA&gt;              u  0.5845737    30430</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    BRAND1    BRAND1              v  0.2767662    21686</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      &lt;NA&gt;      &lt;NA&gt;              u  0.2915153       84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9    BRAND1    BRAND1              v  0.1895003    34827</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Zulma M. Cucunubá, David Santiago Quevedo, Santiago Loaiza.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

