<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>vaccineff • vaccineff</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="vaccineff">
<meta name="description" content="vaccineff">
<meta property="og:description" content="vaccineff">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XZ471458FQ');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="https://epiverse-trace.github.io/blueprints/logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">vaccineff</a>
    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.1</small>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/vaccineff.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epiverse-trace/vaccineff/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>
  </div>
</nav><div class="container template-article">



<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <h1>vaccineff</h1>
                        <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/vaccineff/blob/HEAD/vignettes/vaccineff.Rmd" class="external-link"><code>vignettes/vaccineff.Rmd</code></a></small>
      <div class="d-none name"><code>vaccineff.Rmd</code></div>
    </div>
        <div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/epiverse-trace/vaccineff" class="external-link">vaccineff</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>Estimating the vaccine effectiveness is a key task once a vaccine is
available as a control measure within a population, i.e. during the
middle phase of an epidemic such as Ebola or COVID-19, and also in
evaluation of regular vaccination programs such as childhood
vaccines.</p>
<p><code>vaccineff</code> provides tools to do so under different study
designs, including cohorts, test-negative/case-control and screening
method <span class="citation">(<a href="#ref-torvaldsen2020"><strong>torvaldsen2020?</strong></a>)</span>.
Every design comes with its own example data set which includes
information on the vaccination dates and biologic per doses, and the
relevant demographic information. The level of aggregation of the data
responds to the characteristics and needs of every study case.</p>
</div>
<div class="section level2">
<h2 id="who-are-the-users-potential-users">Who are the users / potential users?<a class="anchor" aria-label="anchor" href="#who-are-the-users-potential-users"></a>
</h2>
<p><code>vaccineff</code> is useful for local, national and
international health agencies looking for a quick implementation to
estimate the vaccine effectiveness based on their available data. It
also provides insights to researchers, data analyst and epidemiology
students to approach vaccine effectiveness under different methods.</p>
</div>
<div class="section level2">
<h2 id="what-is-vaccine-effectiveness">What is vaccine effectiveness?<a class="anchor" aria-label="anchor" href="#what-is-vaccine-effectiveness"></a>
</h2>
<p>In contrast with vaccine efficacy, that is the percentage reduction
of disease/phenomenon incidence in a vaccinated group compared with an
unvaccinated group, under ideal conditions. Vaccine effectiveness is the
percentage reduction of disease/phenomenon incidence in a vaccinated
group compared with an unvaccinated group, under routine conditions.
Evaluating effectiveness of vaccines in the field is an important aspect
of monitoring immunization programs.</p>
</div>
<div class="section level2">
<h2 id="for-which-designs-of-vaccine-effectiveness-is-this-package">For which designs of vaccine effectiveness is this package?<a class="anchor" aria-label="anchor" href="#for-which-designs-of-vaccine-effectiveness-is-this-package"></a>
</h2>
<p><code>vaccineff</code> is a package designed to be used for any
infectious disease for which a vaccine strategy has been implemented.
The study designs currently implemented in the package are: cohorts,
test-negative/case-control and screening method</p>
<div class="section level3">
<h3 id="cohort-design">Cohort Design<a class="anchor" aria-label="anchor" href="#cohort-design"></a>
</h3>
<p>The cohort design VE is estimated using the Hazard Ratios
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>R</mi></mrow><annotation encoding="application/x-tex">HR</annotation></semantics></math>)
of vaccinated and unvaccinated populations according to the following
equation:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mi>E</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo>−</mo><mi>H</mi><mi>R</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow><mo>×</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">VE = (1-HR(t))\times100</annotation></semantics></math>
The HR is estimated using the Cox Proportional Hazards model:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>g</mi></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo>,</mo><mi>s</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><msub><mi>h</mi><mrow><mn>0</mn><mo>,</mo><mi>g</mi></mrow></msub><mo>exp</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>β</mi><mi>s</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">h_g(t,s)=h_{0,g}\exp(\beta s)</annotation></semantics></math></p>
<p>Where the hazards are modeled in terms of the status of vaccination.
The proportional hazards hypothesis is checked using the Schoenfeld
test. If the hypothesis is not satisfied, it is recommended to stratify
the population into smaller groups (g) using the confounding
variables.</p>
</div>
<div class="section level3">
<h3 id="test-negative-design">Test Negative Design<a class="anchor" aria-label="anchor" href="#test-negative-design"></a>
</h3>
<p>The test negative design is a modified case-control design. The
vaccine effectiveness is estimated using the odds ratio (OR) of
vaccination among cases divided into the OR of vaccination among
controls.
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mi>E</mi><mo>=</mo><mn>1</mn><mo>−</mo><mfrac><mtext mathvariant="normal">Vaccination OR among cases</mtext><mtext mathvariant="normal">Vaccination OR among controls</mtext></mfrac><mo>×</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">VE = 1- \frac{\text{Vaccination OR among cases}}{\text{Vaccination OR among controls}}\times 100</annotation></semantics></math></p>
</div>
<div class="section level3">
<h3 id="screening-method">Screening Method<a class="anchor" aria-label="anchor" href="#screening-method"></a>
</h3>
<p>The screening method estimates the VE using the proportion of cases
vaccinated (PCV) and the proportion of the population vaccinated (PPV)
using the following expression:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mi>E</mi><mo>=</mo><mfrac><mtext mathvariant="normal">PCV</mtext><mrow><mn>1</mn><mo>−</mo><mtext mathvariant="normal">PCV</mtext></mrow></mfrac><mo>×</mo><mfrac><mrow><mn>1</mn><mo>−</mo><mtext mathvariant="normal">PPV</mtext></mrow><mtext mathvariant="normal">PPV</mtext></mfrac><mo>×</mo><mn>100</mn></mrow><annotation encoding="application/x-tex">VE = \frac{\text{PCV}}{1-\text{PCV}} \times \frac{1-\text{PPV}}{\text{PPV}} \times 100</annotation></semantics></math>
To calculate the PCV, it is supposed that all, or at least, a random
sample of cases of a disease arising over a given period in a defined
population is available. Additionally, it takes the PPV as a prior
information or external estimate.</p>
</div>
</div>
<div class="section level2">
<h2 id="what-type-of-data-is-needed-to-use-the-package">What type of data is needed to use the package?<a class="anchor" aria-label="anchor" href="#what-type-of-data-is-needed-to-use-the-package"></a>
</h2>
<p>This package is designed to be used for vaccination data sets with
the following structure:</p>
<div class="section level3">
<h3 id="data-for-cohort-design">Data for Cohort design<a class="anchor" aria-label="anchor" href="#data-for-cohort-design"></a>
</h3>
<p>Data disaggregated at individual level to follow up vaccinated and
unvaccinated populations through time. The data set most contain the
following information:</p>
<ul>
<li>Date(s) of vaccination for each individual. The package allows to
work with several doses for each individual and estimates the
immunization date using delay times of outcomes and immunization times
of vaccines.</li>
<li>Date(s) of outcome(s). The package estimates the vaccine
effectiveness against several outcomes. Individuals’ demographic
information (e.g. sex, age-group, health regime) can be specify
depending on the confounding variables that will be introduced in the
model.</li>
</ul>
</div>
<div class="section level3">
<h3 id="data-for-test-negative-design">Data for Test-negative design<a class="anchor" aria-label="anchor" href="#data-for-test-negative-design"></a>
</h3>
<p>Data disaggregated at individual level to correlate vaccination and
disease status for each case. The data set must contain the following
information:</p>
<ul>
<li>Vaccination status for each individual. Consider time since
vaccination and number of doses to determine as vaccinated or
unvaccinated.</li>
<li>Result of gold-standard test for pathogen of interest. Molecular
test as PCR o multiplex-PCR are the most common used test to determine
etiology agents in TND studies.</li>
<li>Individuals demographic information (e.g. sex, age, health
insurance) others can be specify depending on the confounding variables
that will be introduced in the model.</li>
</ul>
</div>
<div class="section level3">
<h3 id="data-for-screening-method-design">Data for Screening method design<a class="anchor" aria-label="anchor" href="#data-for-screening-method-design"></a>
</h3>
<ul>
<li>Vaccination status for each case or age group. Consider time since
vaccination to determine as vaccinated or unvaccinated. If vaccine of
interest required several doses for maximum efficacy exclude patients
with incomplete schemes.</li>
<li>Proportion of population vaccinated. Data can be administrated as
people with complete vaccination and people without complete vaccination
or the proportion of people vaccinated.</li>
<li>Individuals demographic information (e.g. sex, age, health
insurance) others can be specify depending on the confounding variables
that will be introduced in the model.</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="modeling-vaccine-effectiveness">Modeling vaccine effectiveness<a class="anchor" aria-label="anchor" href="#modeling-vaccine-effectiveness"></a>
</h2>
<div class="section level3">
<h3 id="ve-for-cohort-design">VE for Cohort design<a class="anchor" aria-label="anchor" href="#ve-for-cohort-design"></a>
</h3>
<p>The current release of the package bases the estimation of the cohort
design VE on the hypothesis of proportional hazards between the
vaccinated and unvaccinated populations. The estimation of the hazard
ratio relies on the implementation of the Cox model in the R package:
<code>survival</code></p>
<p>The integrated data set <code>cohortdata</code> provides a minimal
example of the input of the package. The following code can be used to
prepare this data set for model implementation and implements the basic
constant model:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"cohortdata"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cohortdata</span><span class="op">$</span><span class="va">immunization</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/get_immunization_date.html">get_immunization_date</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">cohortdata</span>,</span>
<span>    outcome_date_col <span class="op">=</span> <span class="st">"death_date"</span>,</span>
<span>    outcome_delay <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    immunization_delay <span class="op">=</span> <span class="fl">14</span>,</span>
<span>    vacc_date_col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"vaccine_date_1"</span>, <span class="st">"vaccine_date_2"</span><span class="op">)</span>,</span>
<span>    end_cohort <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2044-12-31"</span><span class="op">)</span>,</span>
<span>    take_first <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">cohortdata</span><span class="op">$</span><span class="va">vaccine_status</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_status.html">set_status</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">cohortdata</span>,</span>
<span>  col_names <span class="op">=</span> <span class="st">"immunization"</span>,</span>
<span>  status <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"v"</span>, <span class="st">"u"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cohortdata</span><span class="op">$</span><span class="va">death_status</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_status.html">set_status</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">cohortdata</span>,</span>
<span>  col_names <span class="op">=</span> <span class="st">"death_date"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cohortdata</span><span class="op">$</span><span class="va">time_to_death</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_time_to_event.html">get_time_to_event</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">cohortdata</span>,</span>
<span>  outcome_date_col <span class="op">=</span> <span class="st">"death_date"</span>,</span>
<span>  start_cohort <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2044-01-01"</span><span class="op">)</span>,</span>
<span>  end_cohort <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2044-12-31"</span><span class="op">)</span>,</span>
<span>  start_from_immunization <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/coh_eff_noconf.html">coh_eff_noconf</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">cohortdata</span>,</span>
<span>  outcome_status_col <span class="op">=</span> <span class="st">"death_status"</span>,</span>
<span>  time_to_event_col <span class="op">=</span> <span class="st">"time_to_death"</span>,</span>
<span>  status_vacc_col <span class="op">=</span> <span class="st">"vaccine_status"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt;       HR HR_low HR_high  V_eff V_eff_low V_eff_high     PH      p_value</span></span>
<span><span class="co">#&gt; 1 0.2684 0.1855  0.3884 0.7316    0.6116     0.8145 reject 0.0009088627</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>
    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Santiago Quevedo, Zulma M. Cucunubá, International Development Research Center (IDRC).</p>
</div>
<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.9000.</p>
</div>
    </footer>
</div>
  </body>
</html>
